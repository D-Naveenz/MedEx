2023/05/06 17:32:01 *****************************
2023/05/06 17:32:01 Array
(
    [customerPayment] => 100
    [customerChange] => 10
    [total] => 90
    [medicineIds] => Array
        (
            [0] => Med0002
        )

    [medicineQuantities] => Array
        (
            [0] => 3
        )

)

2023/05/06 17:32:01 /////////Total price 0
2023/05/06 17:32:02 Max: 43 Tag: BILL
2023/05/06 17:32:02 createSellOrder SQL: INSERT INTO pharmacysell (invoice_id, pharmacyUsername, invoice_date, bill_total, customer_money) VALUES ('BILL44', 'testPharmacy', '2023-05-06 12:02:02', '90', '100');
2023/05/06 17:34:57 *****************************
2023/05/06 17:34:57 Array
(
    [customerPayment] => 100
    [customerChange] => 10
    [total] => 90
    [medicineIds] => Array
        (
            [0] => Med0002
        )

    [medicineQuantities] => Array
        (
            [0] => 3
        )

)

2023/05/06 17:34:57 /////////Total price 0
2023/05/06 17:34:58 Max: 44 Tag: BILL
2023/05/06 17:34:59 createSellOrder SQL: INSERT INTO pharmacysell (invoice_id, pharmacyUsername, invoice_date, bill_total, customer_money) VALUES ('BILL45', 'testPharmacy', '2023-05-06 12:04:58', '90', '100');
2023/05/06 17:37:40 *****************************
2023/05/06 17:37:40 Array
(
    [customerPayment] => 100
    [customerChange] => 10
    [total] => 90
    [medicineIds] => Array
        (
            [0] => Med0002
        )

    [medicineQuantities] => Array
        (
            [0] => 3
        )

)

2023/05/06 17:37:40 /////////Total price 0
2023/05/06 17:37:41 Max: 45 Tag: BILL
2023/05/06 17:37:42 createSellOrder SQL: INSERT INTO pharmacysell (invoice_id, pharmacyUsername, invoice_date, bill_total, customer_money) VALUES ('BILL46', 'testPharmacy', '2023-05-06 12:07:41', '90', '100');
2023/05/06 17:38:28 SELECT * FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' ORDER BY invoice_date DESC, invoice_id DESC
2023/05/06 17:38:45 *****************************
2023/05/06 17:38:45 Array
(
    [customerPayment] => 100
    [customerChange] => 49
    [total] => 51
    [medicineIds] => Array
        (
            [0] => Med0001
        )

    [medicineQuantities] => Array
        (
            [0] => 3
        )

)

2023/05/06 17:38:45 /////////Total price 0
2023/05/06 17:38:46 Max: 46 Tag: BILL
2023/05/06 17:38:47 1
2023/05/06 17:38:47 createSellOrder SQL: INSERT INTO pharmacysell (invoice_id, pharmacyUsername, invoice_date, bill_total, customer_money) VALUES ('BILL47', 'testPharmacy', '2023-05-06 12:08:46', '51', '100');
2023/05/06 17:41:33 *****************************
2023/05/06 17:41:33 Array
(
    [customerPayment] => 100
    [customerChange] => 10
    [total] => 90
    [medicineIds] => Array
        (
            [0] => Med0002
        )

    [medicineQuantities] => Array
        (
            [0] => 3
        )

)

2023/05/06 17:41:33 /////////Total price 0
2023/05/06 17:41:34 Max: 47 Tag: BILL
2023/05/06 17:41:35 ----------createSellOrder SQL: 1
2023/05/06 17:41:35 ----------createSellOrder SQL: INSERT INTO pharmacysell (invoice_id, pharmacyUsername, invoice_date, bill_total, customer_money) VALUES ('BILL48', 'testPharmacy', '2023-05-06 12:11:34', '90', '100');
2023/05/06 17:42:47 *****************************
2023/05/06 17:42:47 Array
(
    [customerPayment] => 500
    [customerChange] => 250
    [total] => 250
    [medicineIds] => Array
        (
            [0] => Med0006
        )

    [medicineQuantities] => Array
        (
            [0] => 5
        )

)

2023/05/06 17:42:47 /////////Total price 0
2023/05/06 17:42:48 Max: 48 Tag: BILL
2023/05/06 17:42:49 ----------createSellOrder SQL: INSERT INTO pharmacysell (invoice_id, pharmacyUsername, invoice_date, bill_total, customer_money) VALUES ('BILL49', 'testPharmacy', '2023-05-06 12:12:48', '250', '500');
2023/05/06 17:42:50 updateSellMedicineQuantity: 5
2023/05/06 17:52:25 *****************************
2023/05/06 17:52:25 Array
(
    [customerPayment] => 100
    [customerChange] => 10
    [total] => 90
    [medicineIds] => Array
        (
            [0] => Med0002
        )

    [medicineQuantities] => Array
        (
            [0] => 3
        )

)

2023/05/06 17:52:25 /////////Total price 0
2023/05/06 17:52:26 Max: 49 Tag: BILL
2023/05/06 17:52:27 ----------createSellOrder SQL: INSERT INTO pharmacysell (invoice_id, pharmacyUsername, invoice_date, bill_total, customer_money) VALUES ('BILL50', 'testPharmacy', '2023-05-06 12:22:26', '90', '100');
2023/05/06 17:52:28 Array
(
    [0] => app\models\MedicineOrderModel Object
        (
            [medicineId:app\models\MedicineOrderModel:private] => customerPayment
            [quantity:app\models\MedicineOrderModel:private] => 100
        )

    [1] => app\models\MedicineOrderModel Object
        (
            [medicineId:app\models\MedicineOrderModel:private] => customerChange
            [quantity:app\models\MedicineOrderModel:private] => 10
        )

    [2] => app\models\MedicineOrderModel Object
        (
            [medicineId:app\models\MedicineOrderModel:private] => total
            [quantity:app\models\MedicineOrderModel:private] => 90
        )

    [3] => app\models\MedicineOrderModel Object
        (
            [medicineId:app\models\MedicineOrderModel:private] => medicineIds
            [quantity:app\models\MedicineOrderModel:private] => Array
                (
                    [0] => Med0002
                )

        )

    [4] => app\models\MedicineOrderModel Object
        (
            [medicineId:app\models\MedicineOrderModel:private] => medicineQuantities
            [quantity:app\models\MedicineOrderModel:private] => Array
                (
                    [0] => 3
                )

        )

)

2023/05/06 17:52:28 Array
(
    [0] => 3
)

2023/05/06 17:53:44 *****************************
2023/05/06 17:53:44 Array
(
    [customerPayment] => 200
    [customerChange] => 50
    [total] => 150
    [medicineIds] => Array
        (
            [0] => Med0005
        )

    [medicineQuantities] => Array
        (
            [0] => 3
        )

)

2023/05/06 17:53:44 /////////Total price 0
2023/05/06 17:53:45 Max: 50 Tag: BILL
2023/05/06 17:53:46 ----------createSellOrder SQL: INSERT INTO pharmacysell (invoice_id, pharmacyUsername, invoice_date, bill_total, customer_money) VALUES ('BILL51', 'testPharmacy', '2023-05-06 12:23:45', '150', '200');
2023/05/06 17:55:11 *****************************
2023/05/06 17:55:11 Array
(
    [customerPayment] => 200
    [customerChange] => 80
    [total] => 120
    [medicineIds] => Array
        (
            [0] => Med0002
        )

    [medicineQuantities] => Array
        (
            [0] => 4
        )

)

2023/05/06 17:55:11 /////////Total price 0
2023/05/06 17:55:12 Max: 51 Tag: BILL
2023/05/06 17:55:13 ----------createSellOrder SQL: INSERT INTO pharmacysell (invoice_id, pharmacyUsername, invoice_date, bill_total, customer_money) VALUES ('BILL52', 'testPharmacy', '2023-05-06 12:25:12', '120', '200');
2023/05/06 18:00:32 *****************************
2023/05/06 18:00:32 Array
(
    [customerPayment] => 100
    [customerChange] => 10
    [total] => 90
    [medicineIds] => Array
        (
            [0] => Med0002
        )

    [medicineQuantities] => Array
        (
            [0] => 3
        )

)

2023/05/06 18:00:32 /////////Total price 0
2023/05/06 18:00:33 Max: 52 Tag: BILL
2023/05/06 18:00:35 ----------updateSellMedicineQuantity: 1 1
2023/05/06 18:00:35 ----------updateSellMedicineQuantity: Med0002 3
2023/05/06 18:00:35 UPDATE stock SET remQty = remQty - '3' WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy'
2023/05/06 18:00:36 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy'
2023/05/06 18:00:37 Remaining days updated
2023/05/06 18:00:37 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy'
2023/05/06 18:00:38 0
2023/05/06 18:00:38 Consumption rate updated
2023/05/06 18:00:38 Order ID BILL53
2023/05/06 18:00:38 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL53'
2023/05/06 18:00:38 medicines: Array
2023/05/06 18:00:38 medicines: Med0002 Tylenol Paracetamol 500 3 30
2023/05/06 18:00:39 SELECT * FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' ORDER BY invoice_date DESC, invoice_id DESC
2023/05/06 18:00:46 SELECT * FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' ORDER BY invoice_date DESC, invoice_id DESC
2023/05/06 18:00:50 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL53'
2023/05/06 18:01:52 *****************************
2023/05/06 18:01:52 Array
(
    [customerPayment] => 400
    [customerChange] => 10
    [total] => 390
    [medicineIds] => Array
        (
            [0] => Med0002
            [1] => Med0005
            [2] => Med0006
        )

    [medicineQuantities] => Array
        (
            [0] => 3
            [1] => 3
            [2] => 3
        )

)

2023/05/06 18:01:52 /////////Total price 0
2023/05/06 18:01:53 Max: 53 Tag: BILL
2023/05/06 18:01:55 ----------updateSellMedicineQuantity: 3 3
2023/05/06 18:01:55 ----------updateSellMedicineQuantity: Med0002 3
2023/05/06 18:01:56 UPDATE stock SET remQty = remQty - '3' WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy'
2023/05/06 18:01:57 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy'
2023/05/06 18:01:57 Remaining days updated
2023/05/06 18:01:57 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy'
2023/05/06 18:01:58 0
2023/05/06 18:01:58 Consumption rate updated
2023/05/06 18:01:58 ----------updateSellMedicineQuantity: Med0005 3
2023/05/06 18:01:59 UPDATE stock SET remQty = remQty - '3' WHERE medId = 'Med0005' AND pharmacyName = 'testPharmacy'
2023/05/06 18:02:00 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0005' AND pharmacyName = 'testPharmacy'
2023/05/06 18:02:00 Remaining days updated
2023/05/06 18:02:01 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0005' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0005' AND pharmacyName = 'testPharmacy'
2023/05/06 18:02:01 0
2023/05/06 18:02:01 Consumption rate updated
2023/05/06 18:02:01 ----------updateSellMedicineQuantity: Med0006 3
2023/05/06 18:02:02 UPDATE stock SET remQty = remQty - '3' WHERE medId = 'Med0006' AND pharmacyName = 'testPharmacy'
2023/05/06 18:02:03 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0006' AND pharmacyName = 'testPharmacy'
2023/05/06 18:02:03 Remaining days updated
2023/05/06 18:02:04 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0006' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0006' AND pharmacyName = 'testPharmacy'
2023/05/06 18:02:04 0
2023/05/06 18:02:04 Consumption rate updated
2023/05/06 18:02:04 Order ID BILL54
2023/05/06 18:02:04 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL54'
2023/05/06 18:02:05 medicines: Array
2023/05/06 18:02:05 medicines: Med0002 Tylenol Paracetamol 500 3 30
2023/05/06 18:02:05 medicines: Med0005 Piriton Chlorphenamine 4 3 50
2023/05/06 18:02:05 medicines: Med0006 Allerief Chlorphenamine 10 3 50
2023/05/06 18:02:05 SELECT * FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' ORDER BY invoice_date DESC, invoice_id DESC
2023/05/06 18:02:06 SELECT * FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' ORDER BY invoice_date DESC, invoice_id DESC
2023/05/06 18:02:11 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL54'
2023/05/06 18:04:06 SELECT * FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' ORDER BY invoice_date DESC, invoice_id DESC
2023/05/06 18:05:25 *****************************
2023/05/06 18:05:25 Array
(
    [customerPayment] => 100
    [customerChange] => 15
    [total] => 85
    [medicineIds] => Array
        (
            [0] => Med0001
        )

    [medicineQuantities] => Array
        (
            [0] => 5
        )

)

2023/05/06 18:05:25 /////////Total price 0
2023/05/06 18:05:27 Max: 54 Tag: BILL
2023/05/06 18:05:28 ----------updateSellMedicineQuantity: 1 1
2023/05/06 18:05:28 ----------updateSellMedicineQuantity: Med0001 5
2023/05/06 18:05:29 UPDATE stock SET remQty = remQty - '5' WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:05:30 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:05:31 Remaining days updated
2023/05/06 18:05:31 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:05:31 0
2023/05/06 18:05:31 Consumption rate updated
2023/05/06 18:05:31 Order ID BILL55
2023/05/06 18:05:31 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL55'
2023/05/06 18:05:32 medicines: Array
2023/05/06 18:05:32 medicines: Med0001 Panadol Paracetamol 500 5 17
2023/05/06 18:08:41 *****************************
2023/05/06 18:08:41 Array
(
    [customerPayment] => 100
    [customerChange] => 15
    [total] => 85
    [medicineIds] => Array
        (
            [0] => Med0001
        )

    [medicineQuantities] => Array
        (
            [0] => 5
        )

)

2023/05/06 18:08:41 /////////Total price 0
2023/05/06 18:08:42 Max: 55 Tag: BILL
2023/05/06 18:08:43 ----------updateSellMedicineQuantity: 1 1
2023/05/06 18:08:43 ----------updateSellMedicineQuantity: Med0001 5
2023/05/06 18:08:44 UPDATE stock SET remQty = remQty - '5' WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:08:45 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:08:45 Remaining days updated
2023/05/06 18:08:46 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:08:46 0
2023/05/06 18:08:46 Consumption rate updated
2023/05/06 18:08:46 Order ID BILL56
2023/05/06 18:08:46 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL56'
2023/05/06 18:08:47 medicines: Array
2023/05/06 18:08:47 medicines: Med0001 Panadol Paracetamol 500 5 17
2023/05/06 18:10:07 *****************************
2023/05/06 18:10:07 Array
(
    [customerPayment] => 100
    [customerChange] => 32
    [total] => 68
    [medicineIds] => Array
        (
            [0] => Med0001
        )

    [medicineQuantities] => Array
        (
            [0] => 4
        )

)

2023/05/06 18:10:07 /////////Total price 0
2023/05/06 18:10:08 Max: 56 Tag: BILL
2023/05/06 18:10:09 ----------updateSellMedicineQuantity: 1 1
2023/05/06 18:10:09 ----------updateSellMedicineQuantity: Med0001 4
2023/05/06 18:10:10 UPDATE stock SET remQty = remQty - '4' WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:10:11 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:10:12 Remaining days updated
2023/05/06 18:10:12 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:10:12 0
2023/05/06 18:10:12 Consumption rate updated
2023/05/06 18:10:12 Order ID BILL57
2023/05/06 18:10:12 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL57'
2023/05/06 18:10:23 SELECT * FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' ORDER BY invoice_date DESC, invoice_id DESC
2023/05/06 18:10:27 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL57'
2023/05/06 18:13:11 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL57'
2023/05/06 18:22:34 SELECT * FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' ORDER BY invoice_date DESC, invoice_id DESC
2023/05/06 18:23:21 *****************************
2023/05/06 18:23:21 Array
(
    [customerPayment] => 300
    [customerChange] => 65
    [total] => 235
    [medicineIds] => Array
        (
            [0] => Med0003
            [1] => Med0002
            [2] => Med0001
        )

    [medicineQuantities] => Array
        (
            [0] => 3
            [1] => 3
            [2] => 5
        )

)

2023/05/06 18:23:21 /////////Total price 0
2023/05/06 18:23:22 Max: 57 Tag: BILL
2023/05/06 18:23:23 ----------updateSellMedicineQuantity: 3 3
2023/05/06 18:23:23 ----------updateSellMedicineQuantity: Med0003 3
2023/05/06 18:23:24 UPDATE stock SET remQty = remQty - '3' WHERE medId = 'Med0003' AND pharmacyName = 'testPharmacy'
2023/05/06 18:23:25 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0003' AND pharmacyName = 'testPharmacy'
2023/05/06 18:23:25 Remaining days updated
2023/05/06 18:23:26 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0003' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0003' AND pharmacyName = 'testPharmacy'
2023/05/06 18:23:26 0
2023/05/06 18:23:26 Consumption rate updated
2023/05/06 18:23:26 ----------updateSellMedicineQuantity: Med0002 3
2023/05/06 18:23:27 UPDATE stock SET remQty = remQty - '3' WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy'
2023/05/06 18:23:28 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy'
2023/05/06 18:23:28 Remaining days updated
2023/05/06 18:23:29 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy'
2023/05/06 18:23:29 0
2023/05/06 18:23:29 Consumption rate updated
2023/05/06 18:23:29 ----------updateSellMedicineQuantity: Med0001 5
2023/05/06 18:23:30 UPDATE stock SET remQty = remQty - '5' WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:23:31 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:23:32 Remaining days updated
2023/05/06 18:23:32 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:23:32 0
2023/05/06 18:23:32 Consumption rate updated
2023/05/06 18:23:32 Order ID BILL58
2023/05/06 18:23:32 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL58'
2023/05/06 18:23:36 SELECT * FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' ORDER BY invoice_date DESC, invoice_id DESC
2023/05/06 18:23:42 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL58'
2023/05/06 18:31:20 *****************************
2023/05/06 18:31:20 Array
(
    [customerPayment] => 500
    [customerChange] => 380
    [total] => 120
    [medicineIds] => Array
        (
            [0] => Med0002
        )

    [medicineQuantities] => Array
        (
            [0] => 4
        )

)

2023/05/06 18:31:20 /////////Total price 0
2023/05/06 18:31:21 Max: 58 Tag: BILL
2023/05/06 18:31:23 ----------updateSellMedicineQuantity: 1 1
2023/05/06 18:31:23 ----------updateSellMedicineQuantity: Med0002 4
2023/05/06 18:31:24 UPDATE stock SET remQty = remQty - '4' WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy'
2023/05/06 18:31:24 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy'
2023/05/06 18:31:25 Remaining days updated
2023/05/06 18:31:25 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0002' AND pharmacyName = 'testPharmacy'
2023/05/06 18:31:26 0
2023/05/06 18:31:26 Consumption rate updated
2023/05/06 18:31:26 Order ID BILL59
2023/05/06 18:31:26 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL59'
2023/05/06 18:35:09 *****************************
2023/05/06 18:35:09 Array
(
    [customerPayment] => 100
    [customerChange] => 15
    [total] => 85
    [medicineIds] => Array
        (
            [0] => Med0001
        )

    [medicineQuantities] => Array
        (
            [0] => 5
        )

)

2023/05/06 18:35:09 /////////Total price 0
2023/05/06 18:35:10 Max: 59 Tag: BILL
2023/05/06 18:35:11 ----------updateSellMedicineQuantity: 1 1
2023/05/06 18:35:11 ----------updateSellMedicineQuantity: Med0001 5
2023/05/06 18:35:12 UPDATE stock SET remQty = remQty - '5' WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:35:13 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:35:13 Remaining days updated
2023/05/06 18:35:14 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:35:14 0
2023/05/06 18:35:14 Consumption rate updated
2023/05/06 18:35:14 Order ID BILL60
2023/05/06 18:35:14 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL60'
2023/05/06 18:36:05 *****************************
2023/05/06 18:36:05 Array
(
    [customerPayment] => 100
    [customerChange] => 32
    [total] => 68
    [medicineIds] => Array
        (
            [0] => Med0001
        )

    [medicineQuantities] => Array
        (
            [0] => 4
        )

)

2023/05/06 18:36:05 /////////Total price 0
2023/05/06 18:36:06 Max: 60 Tag: BILL
2023/05/06 18:36:07 ----------updateSellMedicineQuantity: 1 1
2023/05/06 18:36:07 ----------updateSellMedicineQuantity: Med0001 4
2023/05/06 18:36:08 UPDATE stock SET remQty = remQty - '4' WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:36:09 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:36:10 Remaining days updated
2023/05/06 18:36:10 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:36:10 0
2023/05/06 18:36:10 Consumption rate updated
2023/05/06 18:36:10 Order ID BILL61
2023/05/06 18:36:10 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL61'
2023/05/06 18:38:36 *****************************
2023/05/06 18:38:36 Array
(
    [customerPayment] => 100
    [customerChange] => 32
    [total] => 68
    [medicineIds] => Array
        (
            [0] => Med0001
        )

    [medicineQuantities] => Array
        (
            [0] => 4
        )

)

2023/05/06 18:38:36 /////////Total price 0
2023/05/06 18:38:37 Max: 61 Tag: BILL
2023/05/06 18:38:38 ----------updateSellMedicineQuantity: 1 1
2023/05/06 18:38:38 ----------updateSellMedicineQuantity: Med0001 4
2023/05/06 18:38:39 UPDATE stock SET remQty = remQty - '4' WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:38:40 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:38:41 Remaining days updated
2023/05/06 18:38:41 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:38:42 0
2023/05/06 18:38:42 Consumption rate updated
2023/05/06 18:38:42 Order ID BILL62
2023/05/06 18:38:42 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL62'
2023/05/06 18:38:45 SELECT * FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' ORDER BY invoice_date DESC, invoice_id DESC
2023/05/06 18:38:57 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL62'
2023/05/06 18:43:46 *****************************
2023/05/06 18:43:46 Array
(
    [customerPayment] => 60
    [customerChange] => 9
    [total] => 51
    [medicineIds] => Array
        (
            [0] => Med0001
        )

    [medicineQuantities] => Array
        (
            [0] => 3
        )

)

2023/05/06 18:43:46 /////////Total price 0
2023/05/06 18:43:47 Max: 62 Tag: BILL
2023/05/06 18:43:49 ----------updateSellMedicineQuantity: 1 1
2023/05/06 18:43:49 ----------updateSellMedicineQuantity: Med0001 3
2023/05/06 18:43:50 UPDATE stock SET remQty = remQty - '3' WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:43:51 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:43:51 Remaining days updated
2023/05/06 18:43:51 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:43:52 0
2023/05/06 18:43:52 Consumption rate updated
2023/05/06 18:43:52 Order ID BILL63
2023/05/06 18:43:52 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL63'
2023/05/06 18:45:29 *****************************
2023/05/06 18:45:29 Array
(
    [customerPayment] => 70
    [customerChange] => 2
    [total] => 68
    [medicineIds] => Array
        (
            [0] => Med0001
        )

    [medicineQuantities] => Array
        (
            [0] => 4
        )

)

2023/05/06 18:45:29 /////////Total price 0
2023/05/06 18:45:29 Max: 63 Tag: BILL
2023/05/06 18:45:31 ----------updateSellMedicineQuantity: 1 1
2023/05/06 18:45:31 ----------updateSellMedicineQuantity: Med0001 4
2023/05/06 18:45:32 UPDATE stock SET remQty = remQty - '4' WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:45:33 UPDATE stock SET remaining_days = remQty / consumption_rate WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:45:33 Remaining days updated
2023/05/06 18:45:34 UPDATE stock SET consumption_rate = (SELECT AVG(consumption_rate) FROM (SELECT consumption_rate FROM stock WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy' ORDER BY id DESC LIMIT 7) AS t) WHERE medId = 'Med0001' AND pharmacyName = 'testPharmacy'
2023/05/06 18:45:34 0
2023/05/06 18:45:34 Consumption rate updated
2023/05/06 18:45:34 Order ID BILL64
2023/05/06 18:45:34 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL64'
2023/05/06 18:45:37 SELECT * FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' ORDER BY invoice_date DESC, invoice_id DESC
2023/05/06 18:45:44 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL64'
2023/05/06 18:47:27 SELECT pharmacysellmedicine.medId, pharmacysellmedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, stock.sellingPrice as unitPrice FROM pharmacysellmedicine LEFT JOIN medicine ON pharmacysellmedicine.medid = medicine.id LEFT JOIN stock ON medicine.id = stock.medId WHERE invoice_id = 'BILL64'
2023/05/06 18:47:35 SELECT pharmacyordermedicine.medId, pharmacyordermedicine.quantity, medicine.medName, medicine.sciName, medicine.weight, supplier_medicine.unitPrice FROM pharmacyordermedicine LEFT JOIN medicine ON pharmacyordermedicine.medid = medicine.id LEFT JOIN supplier_medicine ON medicine.id = supplier_medicine.medid WHERE orderid = 'ORD36'
2023/05/06 21:37:17 Array
(
    [username] => testPharmacy
    [name] => Test Pharm
    [ownerName] => Test
    [city] => Colombo
    [pharmacyRegNo] => Test01
    [BusinessRegId] => Test01
    [pharmacyCertId] => Test01
    [verified] => 1
    [deliveryTime] => 16:00:30
    [email] => test@gmail.com
    [address] => Test
    [mobile] => 0112320667
    [reg_date] => 
)

2023/05/06 21:37:57 Array
(
    [username] => testPharmacy
    [name] => Test Pharm
    [ownerName] => Test
    [city] => Colombo
    [pharmacyRegNo] => Test01
    [BusinessRegId] => Test01
    [pharmacyCertId] => Test01
    [verified] => 1
    [deliveryTime] => 16:00:30
    [email] => test@gmail.com
    [address] => Test
    [mobile] => 0112320667
    [reg_date] => 2023-05-11
)

2023/05/06 22:17:00 getAcceptedOrdersCount() returned: 2
2023/05/06 22:17:04 getTotalOrdersCount() returned: 2
2023/05/06 22:17:07 SELECT invoice_date, SUM(bill_total) AS total FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND invoice_date >= DATE_SUB(CURDATE(), INTERVAL 7 DAY) GROUP BY invoice_date ORDER BY invoice_date DESC LIMIT 7
2023/05/06 22:17:07 SELECT SUM(bill_total) AS total FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND MONTH(invoice_date) = MONTH(CURRENT_DATE()) AND YEAR(invoice_date) = YEAR(CURRENT_DATE())
2023/05/06 22:17:08 SELECT SUM(quantity * stock.buying_price) AS total  FROM pharmacysellmedicine LEFT JOIN stock ON pharmacysellmedicine.medId = stock.medId WHERE pharmacysellmedicine.invoice_id IN (SELECT invoice_id FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND MONTH(invoice_date) = MONTH(CURRENT_DATE()) AND YEAR(invoice_date) = YEAR(CURRENT_DATE()))
2023/05/06 22:18:13 getAcceptedOrdersCount() returned: 2
2023/05/06 22:18:17 getTotalOrdersCount() returned: 2
2023/05/06 22:18:19 SELECT invoice_date, SUM(bill_total) AS total FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND invoice_date >= DATE_SUB(CURRENT_DATE(), INTERVAL 7 DAY) GROUP BY invoice_date ORDER BY invoice_date ASC
2023/05/06 22:18:20 SELECT SUM(bill_total) AS total FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND MONTH(invoice_date) = MONTH(CURRENT_DATE()) AND YEAR(invoice_date) = YEAR(CURRENT_DATE())
2023/05/06 22:18:21 SELECT SUM(quantity * stock.buying_price) AS total  FROM pharmacysellmedicine LEFT JOIN stock ON pharmacysellmedicine.medId = stock.medId WHERE pharmacysellmedicine.invoice_id IN (SELECT invoice_id FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND MONTH(invoice_date) = MONTH(CURRENT_DATE()) AND YEAR(invoice_date) = YEAR(CURRENT_DATE()))
2023/05/06 22:20:08 getAcceptedOrdersCount() returned: 2
2023/05/06 22:20:12 getTotalOrdersCount() returned: 2
2023/05/06 22:20:15 SELECT DATE(invoice_date) AS date, SUM(bill_total) AS total FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND invoice_date >= DATE_SUB(CURRENT_DATE(), INTERVAL 7 DAY) GROUP BY DATE(invoice_date) ORDER BY date ASC;
2023/05/06 22:20:15 SELECT SUM(bill_total) AS total FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND MONTH(invoice_date) = MONTH(CURRENT_DATE()) AND YEAR(invoice_date) = YEAR(CURRENT_DATE())
2023/05/06 22:20:16 SELECT SUM(quantity * stock.buying_price) AS total  FROM pharmacysellmedicine LEFT JOIN stock ON pharmacysellmedicine.medId = stock.medId WHERE pharmacysellmedicine.invoice_id IN (SELECT invoice_id FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND MONTH(invoice_date) = MONTH(CURRENT_DATE()) AND YEAR(invoice_date) = YEAR(CURRENT_DATE()))
2023/05/06 22:20:57 getAcceptedOrdersCount() returned: 2
2023/05/06 22:21:00 getTotalOrdersCount() returned: 2
2023/05/06 22:21:02 SELECT DATE(invoice_date) AS date, SUM(bill_total) AS total FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND invoice_date >= DATE_SUB(CURRENT_DATE(), INTERVAL 7 DAY) GROUP BY DATE(invoice_date) ORDER BY date ASC;
2023/05/06 22:21:03 SELECT SUM(bill_total) AS total FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND MONTH(invoice_date) = MONTH(CURRENT_DATE()) AND YEAR(invoice_date) = YEAR(CURRENT_DATE())
2023/05/06 22:21:04 SELECT SUM(quantity * stock.buying_price) AS total  FROM pharmacysellmedicine LEFT JOIN stock ON pharmacysellmedicine.medId = stock.medId WHERE pharmacysellmedicine.invoice_id IN (SELECT invoice_id FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND MONTH(invoice_date) = MONTH(CURRENT_DATE()) AND YEAR(invoice_date) = YEAR(CURRENT_DATE()))
2023/05/06 22:22:33 getAcceptedOrdersCount() returned: 2
2023/05/06 22:22:36 getTotalOrdersCount() returned: 2
2023/05/06 22:22:38 SELECT DATE(invoice_date) AS date, SUM(bill_total) AS total FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND invoice_date >= DATE_SUB(CURRENT_DATE(), INTERVAL 7 DAY) GROUP BY DATE(invoice_date) ORDER BY date ASC;
2023/05/06 22:22:39 salesByDay
2023/05/06 22:22:39 Array
(
    [0] => Array
        (
            [date] => 2023-04-30
            [total] => 1540
        )

    [1] => Array
        (
            [date] => 2023-05-04
            [total] => 2932
        )

    [2] => Array
        (
            [date] => 2023-05-05
            [total] => 250
        )

    [3] => Array
        (
            [date] => 2023-05-06
            [total] => 2760
        )

)

2023/05/06 22:22:39 SELECT SUM(bill_total) AS total FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND MONTH(invoice_date) = MONTH(CURRENT_DATE()) AND YEAR(invoice_date) = YEAR(CURRENT_DATE())
2023/05/06 22:22:40 SELECT SUM(quantity * stock.buying_price) AS total  FROM pharmacysellmedicine LEFT JOIN stock ON pharmacysellmedicine.medId = stock.medId WHERE pharmacysellmedicine.invoice_id IN (SELECT invoice_id FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND MONTH(invoice_date) = MONTH(CURRENT_DATE()) AND YEAR(invoice_date) = YEAR(CURRENT_DATE()))
2023/05/06 22:23:07 getAcceptedOrdersCount() returned: 2
2023/05/06 22:23:10 getTotalOrdersCount() returned: 2
2023/05/06 22:23:13 SELECT DATE(invoice_date) AS date, SUM(bill_total) AS total FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND invoice_date >= DATE_SUB(CURRENT_DATE(), INTERVAL 7 DAY) GROUP BY DATE(invoice_date) ORDER BY date ASC;
2023/05/06 22:23:13 salesByDay
2023/05/06 22:23:13 Array
(
    [0] => Array
        (
            [date] => 2023-04-30
            [total] => 1540
        )

    [1] => Array
        (
            [date] => 2023-05-04
            [total] => 2932
        )

    [2] => Array
        (
            [date] => 2023-05-05
            [total] => 250
        )

    [3] => Array
        (
            [date] => 2023-05-06
            [total] => 2760
        )

)

2023/05/06 22:23:13 SELECT SUM(bill_total) AS total FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND MONTH(invoice_date) = MONTH(CURRENT_DATE()) AND YEAR(invoice_date) = YEAR(CURRENT_DATE())
2023/05/06 22:23:14 SELECT SUM(quantity * stock.buying_price) AS total  FROM pharmacysellmedicine LEFT JOIN stock ON pharmacysellmedicine.medId = stock.medId WHERE pharmacysellmedicine.invoice_id IN (SELECT invoice_id FROM pharmacysell WHERE pharmacyUsername = 'testPharmacy' AND MONTH(invoice_date) = MONTH(CURRENT_DATE()) AND YEAR(invoice_date) = YEAR(CURRENT_DATE()))
